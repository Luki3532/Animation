# Custom Export Feature Architecture

## Visual Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Export Panel                           â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  [ğŸ“¦ Export Sprite Sheet]                       â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚  [âš™ï¸  Custom Export] â† NEW! (Purple Gradient)   â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚  [ğŸ–¼ï¸  Export Current Frame]                     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ (Click Custom Export)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Custom Export Dialog                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  Custom Export                                          [âœ•]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [ğŸ–¼ï¸ Format] [ğŸ¬ Animation] [ğŸ“‹ Frames] [ğŸ“ Size] [ğŸ¨ Appearance]â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  TAB CONTENT (Dynamic based on selected tab)                 â•‘  â”‚
â”‚  â•‘                                                               â•‘  â”‚
â”‚  â•‘  Format Tab:                                                  â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”                                â•‘  â”‚
â”‚  â•‘  â”‚GIF â”‚ â”‚MP4 â”‚ â”‚PNG â”‚ â”‚ZIP â”‚ ...                            â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜                                â•‘  â”‚
â”‚  â•‘                                                               â•‘  â”‚
â”‚  â•‘  Quality: [Low] [Medium] [High] [Ultra]                      â•‘  â”‚
â”‚  â•‘                                                               â•‘  â”‚
â”‚  â•‘  Animation Tab:                                               â•‘  â”‚
â”‚  â•‘  FPS: [12] â”â”â”â”â—‹â”â”â”â” (1-60)                                 â•‘  â”‚
â”‚  â•‘  â˜‘ Loop animation                                            â•‘  â”‚
â”‚  â•‘  Codec: [H.264 â–¼]                                            â•‘  â”‚
â”‚  â•‘                                                               â•‘  â”‚
â”‚  â•‘  ... (Other tabs)                                            â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Presets: [Web Optimized GIF â–¼]  [Cancel] [ğŸ“¥ Export]        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User       â”‚
â”‚   Action     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ (Clicks Custom Export)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ExportPanel.vue â”‚
â”‚                  â”‚
â”‚  openCustom      â”‚
â”‚  Export()        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ (Opens Dialog)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CustomExportDialog.vue  â”‚
â”‚                         â”‚
â”‚ â€¢ 5 Tabbed Sections     â”‚
â”‚ â€¢ 20+ Settings          â”‚
â”‚ â€¢ 7 Presets             â”‚
â”‚ â€¢ Real-time Preview     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ (User Configures)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CustomExportOptions     â”‚
â”‚                          â”‚
â”‚  {                       â”‚
â”‚    format: 'gif',        â”‚
â”‚    quality: 'high',      â”‚
â”‚    fps: 12,              â”‚
â”‚    scale: 1.0,           â”‚
â”‚    ...                   â”‚
â”‚  }                       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ (User Clicks Export)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ExportService           â”‚
â”‚  .customExport()         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ (Processes)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Format Router           â”‚
â”‚                          â”‚
â”‚  â€¢ GIF â†’ exportAsGIF()   â”‚
â”‚  â€¢ MP4 â†’ exportAsVideo() â”‚
â”‚  â€¢ PNG â†’ exportAsImage() â”‚
â”‚  â€¢ ZIP â†’ exportAsZIP()   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frame Processing        â”‚
â”‚                          â”‚
â”‚  â€¢ getFramesForExport()  â”‚
â”‚  â€¢ getOutputDimensions() â”‚
â”‚  â€¢ renderFrame()         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Format Encoding         â”‚
â”‚                          â”‚
â”‚  â€¢ Canvas â†’ Blob         â”‚
â”‚  â€¢ Apply quality         â”‚
â”‚  â€¢ Apply compression     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File Download           â”‚
â”‚                          â”‚
â”‚  â€¢ downloadFile()        â”‚
â”‚  â€¢ Optional: metadata    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User's Downloads        â”‚
â”‚                          â”‚
â”‚  â€¢ animation.gif         â”‚
â”‚  â€¢ animation_metadata... â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Hierarchy

```
App.vue
  â”‚
  â””â”€â”€ ExportPanel.vue
        â”‚
        â”œâ”€â”€ (Existing Components)
        â”‚   â”œâ”€â”€ Animation Preview
        â”‚   â”œâ”€â”€ Size Options
        â”‚   â””â”€â”€ Export Buttons
        â”‚
        â””â”€â”€ CustomExportDialog.vue â† NEW
              â”‚
              â”œâ”€â”€ Dialog Header
              â”‚   â”œâ”€â”€ Title: "Custom Export"
              â”‚   â””â”€â”€ Close Button (âœ•)
              â”‚
              â”œâ”€â”€ Tab Navigation
              â”‚   â”œâ”€â”€ Format Tab (ğŸ–¼ï¸)
              â”‚   â”œâ”€â”€ Animation Tab (ğŸ¬)
              â”‚   â”œâ”€â”€ Frames Tab (ğŸ“‹)
              â”‚   â”œâ”€â”€ Size Tab (ğŸ“)
              â”‚   â””â”€â”€ Appearance Tab (ğŸ¨)
              â”‚
              â”œâ”€â”€ Tab Content (Dynamic)
              â”‚   â”‚
              â”‚   â”œâ”€â”€ Format Tab Content
              â”‚   â”‚   â”œâ”€â”€ Format Grid
              â”‚   â”‚   â”œâ”€â”€ Quality Buttons
              â”‚   â”‚   â””â”€â”€ Compression Controls
              â”‚   â”‚
              â”‚   â”œâ”€â”€ Animation Tab Content
              â”‚   â”‚   â”œâ”€â”€ FPS Slider
              â”‚   â”‚   â”œâ”€â”€ Loop Toggle
              â”‚   â”‚   â”œâ”€â”€ Codec Selector
              â”‚   â”‚   â”œâ”€â”€ Bitrate Input
              â”‚   â”‚   â””â”€â”€ GIF Options
              â”‚   â”‚
              â”‚   â”œâ”€â”€ Frames Tab Content
              â”‚   â”‚   â”œâ”€â”€ Range Selector
              â”‚   â”‚   â”œâ”€â”€ Custom Range Inputs
              â”‚   â”‚   â””â”€â”€ Frame Counter
              â”‚   â”‚
              â”‚   â”œâ”€â”€ Size Tab Content
              â”‚   â”‚   â”œâ”€â”€ Scale Slider
              â”‚   â”‚   â”œâ”€â”€ Width/Height Inputs
              â”‚   â”‚   â”œâ”€â”€ Aspect Ratio Lock
              â”‚   â”‚   â””â”€â”€ Quality Toggles
              â”‚   â”‚
              â”‚   â””â”€â”€ Appearance Tab Content
              â”‚       â”œâ”€â”€ Transparency Toggle
              â”‚       â”œâ”€â”€ Color Picker
              â”‚       â””â”€â”€ Metadata Options
              â”‚
              â””â”€â”€ Dialog Footer
                  â”œâ”€â”€ Preset Selector
                  â”œâ”€â”€ Cancel Button
                  â””â”€â”€ Export Button (Primary)
```

## State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Component State                â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  activeTab: 'format'              â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  options: CustomExportOptions {   â”‚ â”‚
â”‚  â”‚    format: 'gif'                  â”‚ â”‚
â”‚  â”‚    quality: 'high'                â”‚ â”‚
â”‚  â”‚    fps: 12                        â”‚ â”‚
â”‚  â”‚    loop: true                     â”‚ â”‚
â”‚  â”‚    frameRange: 'all'              â”‚ â”‚
â”‚  â”‚    scale: 1.0                     â”‚ â”‚
â”‚  â”‚    width: 256                     â”‚ â”‚
â”‚  â”‚    height: 256                    â”‚ â”‚
â”‚  â”‚    transparency: true             â”‚ â”‚
â”‚  â”‚    backgroundColor: '#ffffff'     â”‚ â”‚
â”‚  â”‚    ...                            â”‚ â”‚
â”‚  â”‚  }                                â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  customWidth: 256                 â”‚ â”‚
â”‚  â”‚  customHeight: 256                â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  selectedPreset: ''               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  Computed Properties:                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  outputWidth                      â”‚ â”‚
â”‚  â”‚  outputHeight                     â”‚ â”‚
â”‚  â”‚  selectedFrameCount               â”‚ â”‚
â”‚  â”‚  supportsVideo                    â”‚ â”‚
â”‚  â”‚  supportsCompression              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Export Format Decision Tree

```
User Clicks Export
       â”‚
       â†“
Check format selected
       â”‚
       â”œâ”€ GIF â”€â”€â†’ exportAsGIF()
       â”‚          â”œâ”€ Create GIF encoder
       â”‚          â”œâ”€ Apply color depth
       â”‚          â”œâ”€ Apply dithering
       â”‚          â””â”€ Generate frames
       â”‚
       â”œâ”€ MP4 â”€â”€â†’ exportAsVideo()
       â”‚  WEBM    â”œâ”€ Setup MediaRecorder
       â”‚          â”œâ”€ Set codec & bitrate
       â”‚          â”œâ”€ Render frames
       â”‚          â””â”€ Encode video
       â”‚
       â”œâ”€ APNG â”€â†’ exportAsAPNG()
       â”‚          â”œâ”€ Create APNG encoder
       â”‚          â”œâ”€ Add frames
       â”‚          â””â”€ Apply transparency
       â”‚
       â”œâ”€ PNG â”€â”€â†’ exportAsSingleImage()
       â”‚  JPG      â”œâ”€ Select first frame
       â”‚  WEBP     â”œâ”€ Apply quality
       â”‚          â””â”€ Convert to blob
       â”‚
       â””â”€ ZIP â”€â”€â†’ exportAsImageSequence()
                  â”œâ”€ Create ZIP archive
                  â”œâ”€ Add each frame
                  â””â”€ Compress archive
```

## File Structure

```
animation-tracer/
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ExportPanel.vue
â”‚   â”‚   â”‚   â€¢ Hosts Custom Export button
â”‚   â”‚   â”‚   â€¢ Manages dialog state
â”‚   â”‚   â”‚   â€¢ Handles export trigger
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ CustomExportDialog.vue â† NEW
â”‚   â”‚       â€¢ Modal dialog component
â”‚   â”‚       â€¢ Tab navigation
â”‚   â”‚       â€¢ Settings forms
â”‚   â”‚       â€¢ Preset selector
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ exportService.ts (Enhanced)
â”‚   â”‚       â€¢ customExport()
â”‚   â”‚       â€¢ exportAsGIF()
â”‚   â”‚       â€¢ exportAsVideo()
â”‚   â”‚       â€¢ exportAsAPNG()
â”‚   â”‚       â€¢ exportAsSingleImage()
â”‚   â”‚       â€¢ exportAsImageSequence()
â”‚   â”‚       â€¢ Helper methods
â”‚   â”‚
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ export.ts (Enhanced)
â”‚   â”‚       â€¢ ExportFormat
â”‚   â”‚       â€¢ ExportQuality
â”‚   â”‚       â€¢ CustomExportOptions
â”‚   â”‚       â€¢ DEFAULT_CUSTOM_EXPORT_OPTIONS
â”‚   â”‚
â”‚   â””â”€â”€ stores/
â”‚       â”œâ”€â”€ drawingStore.ts (Used)
â”‚       â””â”€â”€ videoStore.ts (Used)
â”‚
â”œâ”€â”€ Documentation/
â”‚   â”œâ”€â”€ CUSTOM_EXPORT_GUIDE.md
â”‚   â”œâ”€â”€ EXPORT_LIBRARIES_SETUP.md
â”‚   â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md
â”‚   â”œâ”€â”€ QUICK_REFERENCE.md
â”‚   â”œâ”€â”€ CHANGELOG.md
â”‚   â””â”€â”€ ARCHITECTURE.md (This file)
â”‚
â””â”€â”€ package.json
```

## Integration Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Existing System                       â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ drawingStore   â”‚      â”‚  videoStore    â”‚            â”‚
â”‚  â”‚                â”‚      â”‚                â”‚            â”‚
â”‚  â”‚ â€¢ frameDrawingsâ”‚      â”‚ â€¢ currentFrame â”‚            â”‚
â”‚  â”‚ â€¢ canvasSize   â”‚      â”‚ â€¢ file         â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚           â”‚                       â”‚                     â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                   â”‚                                     â”‚
â”‚                   â†“                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚       ExportPanel.vue                  â”‚            â”‚
â”‚  â”‚                                        â”‚            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚            â”‚
â”‚  â”‚  â”‚  Existing Export Functions       â”‚ â”‚            â”‚
â”‚  â”‚  â”‚  â€¢ exportSpriteSheet()           â”‚ â”‚            â”‚
â”‚  â”‚  â”‚  â€¢ exportCurrentFrame()          â”‚ â”‚            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚            â”‚
â”‚  â”‚                                        â”‚            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â† NEW     â”‚
â”‚  â”‚  â”‚  Custom Export Integration       â”‚ â”‚            â”‚
â”‚  â”‚  â”‚  â€¢ openCustomExport()            â”‚ â”‚            â”‚
â”‚  â”‚  â”‚  â€¢ handleCustomExport()          â”‚ â”‚            â”‚
â”‚  â”‚  â”‚  â€¢ isCustomExportOpen (state)    â”‚ â”‚            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                   â”‚                                     â”‚
â”‚                   â†“                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚    CustomExportDialog.vue (NEW)        â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                   â”‚                                     â”‚
â”‚                   â†“                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  ExportService.customExport() (NEW)    â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## User Journey Map

```
1. User has animation ready
         â†“
2. Opens Export Panel
         â†“
3. Sees "Custom Export" button
   (Purple gradient, eye-catching)
         â†“
4. Clicks "Custom Export"
         â†“
5. Dialog opens â†’ Format tab active
         â†“
6. Chooses from 8 formats OR selects preset
         â†“
7. Customizes settings across tabs
   â€¢ Animation (FPS, loop, etc.)
   â€¢ Frames (which frames to export)
   â€¢ Size (scale, dimensions)
   â€¢ Appearance (background, transparency)
         â†“
8. Reviews settings in preview
         â†“
9. Clicks "Export" button
         â†“
10. File downloads to computer
    (Optional: metadata file too)
         â†“
11. Success! Animation exported
```

## Key Design Decisions

### Why Tabs?
- **20+ settings** would be overwhelming in one view
- Logical grouping improves UX
- Easy to find specific settings
- Progressive disclosure pattern

### Why Presets?
- **Reduces complexity** for common use cases
- **Speeds up workflow** for experienced users
- **Educational** - shows good settings combinations
- **Starting point** for customization

### Why Modal Dialog?
- **Focus** - User concentrates on export settings
- **Context** - Doesn't leave export workflow
- **Space** - Room for all controls
- **Flexibility** - Can expand/add features

### Why Quality Presets?
- **Simplifies** technical decisions
- **Maps** to user intent (not technical values)
- **Consistent** across formats
- **Predictable** results

## Performance Considerations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Performance Strategy            â”‚
â”‚                                         â”‚
â”‚  Dialog:                                â”‚
â”‚  â€¢ Lazy loaded component               â”‚
â”‚  â€¢ Only rendered when open             â”‚
â”‚  â€¢ Lightweight reactive state          â”‚
â”‚                                         â”‚
â”‚  Export Processing:                     â”‚
â”‚  â€¢ Frame selection before processing   â”‚
â”‚  â€¢ Single canvas reuse                 â”‚
â”‚  â€¢ Blob cleanup after download         â”‚
â”‚  â€¢ Memory-conscious frame handling     â”‚
â”‚                                         â”‚
â”‚  Future Optimizations:                  â”‚
â”‚  â€¢ Web Workers for encoding            â”‚
â”‚  â€¢ Streaming large exports             â”‚
â”‚  â€¢ Progress indicators                 â”‚
â”‚  â€¢ Cancellation support                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**This architecture provides a solid foundation for highly customizable exports while maintaining clean separation of concerns and excellent user experience.**
